CREATE TABLE PRODUCTO(
    ID_CODIGO NUMERIC(4) NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(240) NOT NULL UNIQUE,
    STOCK  NUMERIC(6) NOT NULL,
    PRECIO NUMERIC(6,2) NOT NULL,
    ESTADO CHAR(1) DEFAULT '1' NOT NULL
);

CREATE SEQUENCE SEQ_PRODUCTO;

INSERT INTO PRODUCTO(ID_CODIGO,NOMBRE,STOCK,PRECIO)
VALUES(SEQ_PRODUCTO.NEXTVAL,'Laptop ASUS VivoBook Pro',10,4500);

INSERT INTO PRODUCTO(ID_CODIGO,NOMBRE,STOCK,PRECIO)
VALUES(SEQ_PRODUCTO.NEXTVAL,'Mouse Genius',2,20);


INSERT INTO PRODUCTO(ID_CODIGO,NOMBRE,STOCK,PRECIO)
VALUES(SEQ_PRODUCTO.NEXTVAL,'Impresora Epson L555',1,950);
COMMIT;

UPDATE PRODUCTO SET NOMBRE='Impresora Epson L556', STOCK=3, PRECIO=879
WHERE ID_CODIGO=3;

SELECT * FROM PRODUCTO; -- Mala práctica

SELECT ID_CODIGO,NOMBRE,STOCK,PRECIO,ESTADO FROM PRODUCTO;

-- alter session set "_ORACLE_SCRIPT"=true;

DELETE FROM PRODUCTO WHERE ID_CODIGO=7;-- Borrado fisico / No usar


CREATE OR REPLACE 
PACKAGE PKG_PRODUCTO AS 

    PROCEDURE SP_LISTAR(
       P_CURSOR    OUT SYS_REFCURSOR
    );
    
END PKG_PRODUCTO

CREATE OR REPLACE
PACKAGE BODY PKG_PRODUCTO AS

  PROCEDURE SP_LISTAR(
       P_CURSOR    OUT SYS_REFCURSOR
    ) AS
  BEGIN
        OPEN 
            P_CURSOR
        FOR
            SELECT 
                ID_CODIGO,
                NOMBRE,
                STOCK,
                PRECIO,
                ESTADO
            FROM 
                PRODUCTO
            WHERE
                ESTADO='1';
  END SP_LISTAR;

END PKG_PRODUCTO;


